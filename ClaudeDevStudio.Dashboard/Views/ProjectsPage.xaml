<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ClaudeDevStudio.Dashboard.Views.ProjectsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock Text="Projects" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock Text="Active ClaudeDevStudio projects" 
                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                      Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Projects List -->
        <ScrollViewer Grid.Row="1">
            <ItemsRepeater x:Name="ProjectsList" ItemsSource="{x:Bind Projects}">
                <ItemsRepeater.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                               BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                               BorderThickness="1"
                               CornerRadius="8"
                               Padding="16"
                               Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="16"/>
                                    <TextBlock Text="{Binding Path}" 
                                             Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                             Margin="0,4,0,0"/>
                                    <TextBlock Margin="0,8,0,0">
                                        <Run Text="Last activity:"/>
                                        <Run Text="{Binding LastActivity}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                    </TextBlock>
                                </StackPanel>

                                <StackPanel Grid.Column="1" Spacing="8">
                                    <Button Content="Open" Click="OpenProject_Click" Tag="{Binding Path}"/>
                                    <Button Content="View Memory" Style="{StaticResource AccentButtonStyle}" 
                                           Click="ViewMemory_Click" Tag="{Binding Path}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>
        </ScrollViewer>
    </Grid>
</Page>
