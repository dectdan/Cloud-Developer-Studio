<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ClaudeDevStudio.Dashboard.Views.MistakesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock Text="Lessons Learned" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock Text="Mistakes and their fixes - never repeat the same error" 
                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                      Margin="0,4,0,0"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1">
            <ItemsRepeater x:Name="MistakesList">
                <ItemsRepeater.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                               BorderBrush="{Binding BorderColor}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="16"
                               Margin="0,0,0,12">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Severity Badge -->
                                <Border Grid.Row="0" 
                                       Background="{Binding SeverityColor}"
                                       CornerRadius="4"
                                       Padding="8,4"
                                       HorizontalAlignment="Left"
                                       Margin="0,0,0,8">
                                    <TextBlock Text="{Binding SeverityText}" 
                                             Foreground="White"
                                             FontSize="12"
                                             FontWeight="SemiBold"/>
                                </Border>

                                <!-- Mistake -->
                                <StackPanel Grid.Row="1" Spacing="4">
                                    <TextBlock Text="What went wrong:" 
                                             FontSize="12"
                                             Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                    <TextBlock Text="{Binding Mistake}" 
                                             FontWeight="SemiBold"
                                             TextWrapping="Wrap"/>
                                </StackPanel>

                                <!-- Fix -->
                                <StackPanel Grid.Row="2" Spacing="4" Margin="0,12,0,0">
                                    <TextBlock Text="The fix:" 
                                             FontSize="12"
                                             Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                    <TextBlock Text="{Binding Fix}" 
                                             TextWrapping="Wrap"/>
                                </StackPanel>

                                <!-- Lesson -->
                                <StackPanel Grid.Row="3" Spacing="4" Margin="0,12,0,0">
                                    <TextBlock Text="ðŸ’¡ Lesson learned:" 
                                             FontSize="12"
                                             FontWeight="SemiBold"
                                             Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                    <TextBlock Text="{Binding Lesson}" 
                                             TextWrapping="Wrap"
                                             Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>
        </ScrollViewer>
    </Grid>
</Page>
